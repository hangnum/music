# ğŸµ Python Music Player

ä¸€ä¸ªé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡çš„é«˜è´¨é‡æœ¬åœ°éŸ³ä¹æ’­æ”¾å™¨ã€‚

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![PyQt6](https://img.shields.io/badge/PyQt6-6.0+-green.svg)](https://pypi.org/project/PyQt6/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### å·²å®ç°

- ğŸ¶ **éŸ³ä¹æ’­æ”¾** - æ”¯æŒ MP3ã€FLACã€WAVã€OGGã€M4Aã€AAC ç­‰æ ¼å¼
- ğŸ§ **é«˜çº§éŸ³é¢‘** - æ”¯æŒæ— ç¼æ’­æ”¾ (Gapless)ã€æ·¡å…¥æ·¡å‡º (Crossfade)ã€ReplayGain éŸ³é‡å¹³è¡¡
- ğŸšï¸ **å‡è¡¡å™¨** - 10 æ®µä¸“ä¸šå‡è¡¡å™¨ï¼Œå†…ç½®å¤šç§é¢„è®¾ (Rock, Pop, Jazz, etc.)
- ğŸ“š **åª’ä½“åº“ç®¡ç†** - è‡ªåŠ¨æ‰«æå¹¶ç´¢å¼•æœ¬åœ°éŸ³ä¹æ–‡ä»¶
- ğŸ” **æ™ºèƒ½æœç´¢** - æ”¯æŒæŒ‰æ›²ç›®ã€è‰ºæœ¯å®¶ã€ä¸“è¾‘æœç´¢
- ğŸ“‹ **æ’­æ”¾é˜Ÿåˆ—** - çµæ´»çš„æ’­æ”¾é˜Ÿåˆ—ç®¡ç†
- ğŸ”€ **æ’­æ”¾æ¨¡å¼** - é¡ºåºæ’­æ”¾ã€éšæœºæ’­æ”¾ã€å•æ›²å¾ªç¯ã€åˆ—è¡¨å¾ªç¯
- ğŸ·ï¸ **æ ‡ç­¾ç®¡ç†** - æ‰‹åŠ¨ä¸ºæ›²ç›®æ·»åŠ è‡ªå®šä¹‰æ ‡ç­¾
- ğŸ·ï¸ **æ™ºèƒ½æ ‡ç­¾** - åŸºäº LLM è‡ªåŠ¨åˆ†ææ­Œæ›²é£æ ¼ã€æƒ…æ„Ÿå¹¶æ‰¹é‡æ‰“æ ‡
- ğŸ¤– **æ™ºèƒ½é˜Ÿåˆ—** - åŸºäº LLM (SiliconFlow/Gemini) çš„è‡ªç„¶è¯­è¨€é˜Ÿåˆ—é‡æ’ï¼Œæ”¯æŒæ ‡ç­¾è¯­ä¹‰è¿‡æ»¤
- ğŸ¨ **æ·±è‰²ä¸»é¢˜** - ç°ä»£åŒ– Spotify é£æ ¼ç•Œé¢
- ğŸ“Š **å…ƒæ•°æ®è§£æ** - è‡ªåŠ¨è¯»å–éŸ³ä¹æ–‡ä»¶æ ‡ç­¾ä¿¡æ¯

### å¼€å‘ä¸­

- ğŸ“ æ­Œè¯æ˜¾ç¤º
- ğŸ”” ç³»ç»Ÿæ‰˜ç›˜
- âŒ¨ï¸ å…¨å±€å¿«æ·é”®

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| GUIæ¡†æ¶ | PyQt6 | è·¨å¹³å°å›¾å½¢ç•Œé¢ |
| éŸ³é¢‘å¼•æ“ | miniaudio / vlc / pygame | å¤šåç«¯éŸ³é¢‘å¼•æ“æ”¯æŒï¼Œé»˜è®¤ miniaudio |
| å…ƒæ•°æ®è§£æ | mutagen | å¤šæ ¼å¼éŸ³é¢‘æ ‡ç­¾è¯»å– |
| æ•°æ®åº“ | SQLite | æœ¬åœ°æ•°æ®å­˜å‚¨ |
| é…ç½®ç®¡ç† | PyYAML | YAMLæ ¼å¼é…ç½®æ–‡ä»¶ |
| LLM æœåŠ¡ | SiliconFlow / Gemini | æ™ºèƒ½ç‰¹æ€§æ”¯æŒ (é˜Ÿåˆ—é‡æ’ã€è‡ªåŠ¨æ‰“æ ‡) |

## ğŸ“¦ å®‰è£…

### ç¯å¢ƒè¦æ±‚

- Python 3.11+
- Conda (æ¨è) æˆ– pip
- (å¯é€‰) VLC Player (å¦‚æœä½¿ç”¨ VLC åç«¯)

### ä½¿ç”¨ Conda

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n music python=3.11
conda activate music

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### ä½¿ç”¨ pip

```bash
pip install -r requirements.txt
```

## ğŸš€ è¿è¡Œ

```bash
python src/main.py
```

## âŒ¨ï¸ å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ |
|--------|------|
| `Space` | æ’­æ”¾/æš‚åœ |
| `Ctrl+Right` | ä¸‹ä¸€æ›² |
| `Ctrl+Left` | ä¸Šä¸€æ›² |
| `Ctrl+Up` | éŸ³é‡å¢åŠ  |
| `Ctrl+Down` | éŸ³é‡å‡å°‘ |

## ğŸ“ é¡¹ç›®ç»“æ„

```text
music/
â”œâ”€â”€ docs/                    # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md      # ç³»ç»Ÿæ¶æ„
â”‚   â”œâ”€â”€ technical_design.md  # æŠ€æœ¯è®¾è®¡
â”‚   â””â”€â”€ api.md               # APIæ¥å£
â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ audio_engine.py      # éŸ³é¢‘å¼•æ“åŸºç±»
â”‚   â”‚   â”œâ”€â”€ engine_factory.py    # éŸ³é¢‘å¼•æ“å·¥å‚
â”‚   â”‚   â”œâ”€â”€ miniaudio_engine.py  # Miniaudio åç«¯ (High Quality)
â”‚   â”‚   â”œâ”€â”€ vlc_engine.py        # VLC åç«¯
â”‚   â”‚   â”œâ”€â”€ event_bus.py         # äº‹ä»¶æ€»çº¿
â”‚   â”‚   â”œâ”€â”€ metadata.py          # å…ƒæ•°æ®è§£æ
â”‚   â”‚   â”œâ”€â”€ database.py          # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â””â”€â”€ llm_provider.py      # LLM æä¾›å•†æŠ½è±¡
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ track.py         # æ›²ç›®
â”‚   â”‚   â”œâ”€â”€ album.py         # ä¸“è¾‘
â”‚   â”‚   â”œâ”€â”€ artist.py        # è‰ºæœ¯å®¶
â”‚   â”‚   â”œâ”€â”€ playlist.py      # æ’­æ”¾åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ eq_preset.py     # å‡è¡¡å™¨é¢„è®¾
â”‚   â”œâ”€â”€ services/            # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ player_service.py      # æ’­æ”¾æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ library_service.py     # åª’ä½“åº“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ playlist_service.py    # æ’­æ”¾åˆ—è¡¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ config_service.py      # é…ç½®æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ tag_service.py         # æ ‡ç­¾æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm_queue_service.py   # æ™ºèƒ½é˜Ÿåˆ—æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm_tagging_service.py # æ™ºèƒ½æ‰“æ ‡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ tag_query_parser.py    # æ ‡ç­¾æŸ¥è¯¢è§£æ
â”‚   â”‚   â””â”€â”€ llm_providers/         # LLM é€‚é…å™¨ (Gemini/SiliconFlow)
â”‚   â”œâ”€â”€ ui/                  # ç•Œé¢å±‚
â”‚   â”‚   â”œâ”€â”€ main_window.py       # ä¸»çª—å£
â”‚   â”‚   â”œâ”€â”€ widgets/             # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dialogs/             # å¯¹è¯æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ audio_settings_dialog.py # éŸ³é¢‘è®¾ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ styles/              # æ ·å¼è¡¨
â”‚   â””â”€â”€ main.py              # ç¨‹åºå…¥å£
â”œâ”€â”€ tests/                   # å•å…ƒæµ‹è¯•
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ default_config.yaml  # é»˜è®¤é…ç½®
â””â”€â”€ requirements.txt         # ä¾èµ–åˆ—è¡¨
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œéµå¾ª SOLID åŸåˆ™ï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            UI Layer                 â”‚  PyQt6 ç•Œé¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Service Layer              â”‚  ä¸šåŠ¡é€»è¾‘ (Play, Library, LLM...)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Core Layer                â”‚  æ ¸å¿ƒåŠŸèƒ½ (Audio, DB, EventBus)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Data Layer                â”‚  æ•°æ®å­˜å‚¨ (SQLite, Config)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œæ ¸å¿ƒæ¨¡å—æµ‹è¯•
python -m pytest tests/test_core.py -v

# è¿è¡ŒæœåŠ¡å±‚æµ‹è¯•
python -m pytest tests/test_services.py -v
```

## ğŸ“„ é…ç½®

é…ç½®æ–‡ä»¶ä½äº `config/default_config.yaml`ï¼š

```yaml
library:
  directories:
    - "D:\\User\\music\\music"  # éŸ³ä¹åº“è·¯å¾„
  supported_formats:
    - mp3
    - flac
    - wav
    - ogg

playback:
  default_volume: 0.8
  
ui:
  theme: dark
  window_width: 1200
  window_height: 800
```

## ğŸ“š æ–‡æ¡£

è¯¦ç»†è®¾è®¡æ–‡æ¡£è¯·æŸ¥çœ‹ `docs/` ç›®å½•ï¼š

- [ç³»ç»Ÿæ¶æ„](docs/architecture.md) - æ•´ä½“æ¶æ„è®¾è®¡
- [æŠ€æœ¯è®¾è®¡](docs/technical_design.md) - æ¨¡å—æŠ€æœ¯ç»†èŠ‚
- [APIæ¥å£](docs/api.md) - æ¥å£è§„èŒƒ

## ğŸ“ License

MIT License
