# Music Player Build Configuration
# This file contains settings for building executable packages

build:
  # Application information
  app_name: "MusicPlayer"
  app_version: "1.0.0"
  app_description: "Python Music Player with PyQt6"
  app_copyright: "Copyright (C) 2024 Music Player Team"

  # Build settings
  single_file: true          # Create single executable or directory
  console: false             # Show console window (for debugging)
  upx_compression: true      # Use UPX compression to reduce size

  # Platform-specific settings
  platforms:
    windows:
      icon: "assets/icon.ico"
      version_info: "version_info.txt"
      installer_script: "installer.nsi"
      manifest: "app.manifest"

    darwin:
      icon: "assets/icon.icns"
      bundle_id: "com.musicplayer.app"
      category: "public.app-category.music"
      min_system_version: "10.15"

    linux:
      icon: "assets/icon.png"
      desktop_file: "musicplayer.desktop"
      appimage: true

# Include data files
data_files:
  - source: "src/config/default_config.yaml"
    destination: "config"
  - source: "src/ui/styles"
    destination: "ui/styles"
  - source: "README.md"
    destination: "."
  - source: "LICENSE"
    destination: "."

# Hidden imports (modules that need to be explicitly included)
hidden_imports:
  # Pygame
  - "pygame.sdl2_video"
  - "pygame.mixer_music"
  - "pygame.mixer"

  # PyQt6
  - "PyQt6.QtCore"
  - "PyQt6.QtGui"
  - "PyQt6.QtWidgets"
  - "PyQt6.QtSvg"

  # Audio format support
  - "mutagen.mp3"
  - "mutagen.flac"
  - "mutagen.wavpack"
  - "mutagen.oggvorbis"
  - "mutagen.mp4"
  - "mutagen.m4a"
  - "mutagen.wma"
  - "mutagen.apev2"

  # LLM Queue dependencies
  - "requests"
  - "openai"
  - "anthropic"
  - "tiktoken"

  # YAML and config
  - "yaml"
  - "yaml.scanner"
  - "yaml.parser"
  - "yaml.serializer"
  - "yaml.resolver"

  # SSL (for LLM API calls)
  - "ssl"
  - "_ssl"
  - "certifi"

# Exclude modules to reduce size
excludes:
  - "tkinter"
  - "unittest"
  - "test"
  - "tests"
  - "doctest"
  - "pdb"
  - "pdb.doc"
  - "matplotlib"
  - "numpy"
  - "scipy"
  - "pandas"
  - "IPython"
  - "jupyter"
  - "notebook"
  - "tensorflow"
  - "torch"
  - "cv2"
  - "PIL.ImageQt"
  - "matplotlib.pyplot"

# UPX compression settings
upx:
  enabled: true
  exclude:
    - "vcruntime140.dll"
    - "msvcp140.dll"
    - "python*.dll"

# Splash screen (optional)
splash:
  enabled: false
  image: "assets/splash.png"
  duration: 3000  # milliseconds